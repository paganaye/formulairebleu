var N=n=>{throw TypeError(n)};var S=(n,e,t)=>e.has(n)||N("Cannot "+t);var d=(n,e,t)=>(S(n,e,"read from private field"),t?t.call(n):e.get(n)),C=(n,e,t)=>e.has(n)?N("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),b=(n,e,t,i)=>(S(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();const T=new Map;function y(n="id"){n=$(n);let e=(T.get(n)??0)+1;return T.set(n,e),`${n}${e}`}function $(n){return n.trim().replace(/ /g,"_").replace(/[^a-zA-Z0-9_-]/g,"").replace(/^([^a-zA-Z_])/,"_$1").replace(/([0-9])$/,"$1_").replace(/__+/g,"_")}class p{}function D(n){return n&&typeof n.getValue=="function"}var g,h;class c{constructor(e,t=void 0){C(this,g);C(this,h);b(this,h,t),this.id=y(e)}getValue(){return d(this,h)}setValue(e){e!==d(this,h)&&(b(this,h,e),this.notifyObservers())}addObserver(e){(d(this,g)||b(this,g,new Set)).add(e)}notifyObservers(){var e;(e=d(this,g))==null||e.forEach(t=>t(d(this,h)))}}g=new WeakMap,h=new WeakMap;function M(n,e,t){D(n)?(e(n.getValue()),n.addObserver(e)):e(n)}function f(n){if(n===void 0)return[document.createComment(y("undefined-source"))];if(n===null)return[document.createComment(y("null-source"))];const e=typeof n;if(["string","number","boolean"].includes(e))return[document.createTextNode(n.toString())];if(e=="object"){if(D(n)){let t=f(n.getValue());const i=s=>{var w,_;const r=(w=t[t.length-1])==null?void 0:w.nextSibling,a=f(s);a.length==0&&a.push(document.createComment(y(n.id+"-placeholder")));const x=(_=t[0])==null?void 0:_.parentNode;x&&(t.forEach(B=>{var L;return(L=B.parentNode)==null?void 0:L.removeChild(B)}),a.forEach(B=>x.insertBefore(B,r))),t.length=0,t.push(...a)};return n.addObserver(i),t}return Array.isArray(n)?n.flatMap(f):n instanceof Node?[n]:[document.createTextNode(String(n))]}if(e==="function")return f(n());throw Error("Unexpected JSX child "+n)}function o(n,e,...t){switch(typeof n){case"string":const i=document.createElement(n);return i.id=y(n),e&&Object.keys(e).forEach(s=>{let r=e[s];s=="ref"&&r instanceof c&&setTimeout(()=>r.setValue(i)),s.startsWith("on")&&typeof r=="function"?i.addEventListener(s.slice(2).toLowerCase(),r):(r===void 0&&(r=""),D(r)?M(r,a=>{a===!0&&(a=""),a===!1?i.removeAttribute(s):i.setAttribute(s,a)}):(r==!0&&(r=""),r!==!1&&i.setAttribute(s,r)))}),t.forEach(s=>f(s).forEach(r=>i.appendChild(r))),i;case"function":return n===p?t.flatMap(f):n(e||{},t);default:throw Error("Unexpected JSX element "+n)}}function j(n,e=document.body){f(n).forEach(t=>e.appendChild(t))}function F(n,e,t){const i={},s=new c(n,void 0);for(const r in e){const a=e[r];i[r]=a.getValue(),a.addObserver(x=>{i[r]=x;let w=t(i);s.setValue(w)})}return s.setValue(t(i)),s}const O=class O{static add(e,t){try{const i=Object.entries(t).map(([s,r])=>`${this.camelToKebab(s)}: ${r};`).join(" ");this.styleSheet.insertRule(`${e} { ${i} }`,this.styleSheet.cssRules.length)}catch(i){console.error(i)}}static camelToKebab(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}};O.styleSheet=(()=>{const e=document.createElement("style");return document.head.appendChild(e),e.sheet})();let u=O,I=new c("currentPage",document.location.hash);u.add("a.link.selected",{textDecoration:"none"});window.onhashchange=n=>{I.setValue(document.location.hash)};function E(n,...e){return o("a",{id:n.href.substring(1),class:F("selected",{currentPage:I},t=>t.currentPage==n.href?"link selected":"link"),href:n.href==""?"#":n.href},e)}let P={welcome:"Welcome",menu_home:"Home",menu_form_editor:"Form Editor",menu_tests:"Tests",menu_about:"About"},q={...P,welcome:"Bienvenue",menu_home:"Accueil",menu_form_editor:"Éditeur de formulaire",menu_tests:"Tests",menu_about:"À propos"},k=navigator.language.toLowerCase().startsWith("fr")?"fr":"en",A=k=="fr"?q:P;document.documentElement.setAttribute("lang",k);console.log("Language:",k);u.add("nav.main-nav > a",{margin:"5px"});u.add("nav.main-nav > a.active",{margin:"15px"});function v(){return o(p,null,o("nav",{class:"main-nav"},o(E,{href:""},A.menu_home),o(E,{href:"#form-editor"},A.menu_form_editor),o(E,{href:"#tests"},A.menu_tests),o(E,{href:"#about"},A.menu_about)))}function z(){return o(p,null,o("div",{class:"container"},o(v,null),o("h1",null,"A propos de Formulaire Bleu"),o("p",null,"Formulaire bleu est développé par Pascal GANAYE"),o("p",null,"Formulaire Bleu ne stocke pas vos données. Vos formulaires et leurs données résident sur votre propre fichier Google Docs ou sur votre serveur."),o("p",null,"Formulaire Bleu est entièrement gratuit et open source. Distribué  sur ",o("a",{href:"https://github.com/paganaye/formulairebleu"},"github.com")," sous une licence permissive (MIT License), il vous permet de l'utiliser, de le modifier et de le redistribuer librement, que ce soit dans des projets personnels ou commerciaux."),o("p",null,"Si vous avez une suggestion d’amélioration, si vous rencontrez un bug ou si vous souhaitez me contacter, veuillez ",o("a",{href:"https://github.com/paganaye/formulairebleu/issues/new"},"créer un ticket"))))}function W(){return o(p,null,o("div",{class:"container"},o(v,null),o("h1",null,"Éditeur de formulaire")))}function R(){return o(p,null,o("div",{class:"container"},o(v,null),o("h1",null,"Formulaire Bleu"),o("p",null,"Formulaire Bleu est une librairie de formulaires qui vous permet de créer des formulaires pour vos pages web ou vos applications Google Apps en toute simplicité. Avec Formulaire Bleu, vous prenez soin à la fois du créateur du formulaire et de ses utilisateurs.")))}function G(){return o(p,null,o("div",{class:"container"},o(v,null),o("h1",null,"Cette page n'existe pas")))}function K(){let n=new c("testIframe");return n.addObserver(e=>{e&&e.contentDocument&&(e.contentDocument.open(),e.contentDocument.write(`
<p>hi</p>
<script>        
    window.addEventListener("message", (event) => {
        if (event.origin !== window.location.origin) return;
        console.log("Message reçu :", event.data);

        // Réponse vers la page principale
        event.source.postMessage("Réponse depuis l'iframe", event.origin);
    });
<\/script>
`),e.contentDocument.close(),e.contentWindow.postMessage("hello iframe","*"),window.addEventListener("message",t=>{t.origin===window.location.origin&&console.log("Message reçu depuis l'iframe :",t.data)}))}),o(p,null,o(v,null),o("h1",null,"Tests"),o("div",{class:"container"},o("iframe",{ref:n})))}u.add(".error",{color:"red"});var m;const V=class V extends c{constructor(t,i,s,r){super("box",void 0);C(this,m);this.engine=t,this.parent=i,this.name=s,this.uniqueId=V.getUniqueId(),this.errors=new c("boxErrors",[]),this.pageNo=new c("boxPageNo",{startPage:0,startLine:0,endPage:0,endLine:0});let a=t.templates&&t.templates[r.type];this.type=a??r}static getUniqueId(){return++V.lastBoxId}addChildChangedObserver(t,i=!1){(d(this,m)||b(this,m,new Set)).add(t),i&&t({box:this})}notifyChildChanged(t){d(this,m)&&d(this,m).forEach(i=>i({box:t})),this.parent&&this.parent.notifyChildChanged(t)}validate(){const t=[];this.engine.validate(this,this.type.validations,t),this.errors.setValue(t)}static enBox(t,i,s,r,a){switch(r=t.getActualType(r),r.type){case"number":return new H(t,i,s,r,a);case"boolean":return new J(t,i,s,r,a);case"object":return new X(t,i,s,r,a);case"array":return new Z(t,i,s,r,a);case"variant":return new Q(t,i,s,r,a);case"string":default:return new U(t,i,s,r,a)}}static unBox(t){return t.getValue()}};m=new WeakMap,V.lastBoxId=0;let l=V;class U extends l{constructor(e,t,i,s,r){super(e,t,i,s),super.setValue(r==null?this.getDefaultValue():String(r))}setValue(e){super.setValue(e==null?this.getDefaultValue():String(e)),this.validate(),this.notifyChildChanged(this)}getDefaultValue(){return this.type.defaultValue??""}}class H extends l{constructor(e,t,i,s,r){super(e,t,i,s),super.setValue(r==null?this.getDefaultValue():Number(r))}setValue(e){super.setValue(e==null?this.getDefaultValue():Number(e)),this.validate(),this.notifyChildChanged(this)}getDefaultValue(){return this.type.defaultValue??null}}class J extends l{constructor(e,t,i,s,r){super(e,t,i,s),super.setValue(r==null?this.getDefaultValue():!!r)}setValue(e){super.setValue(e==null?this.getDefaultValue():!!e),this.validate(),this.notifyChildChanged(this)}getDefaultValue(){return this.type.defaultValue??!1}}class X extends l{constructor(e,t,i,s,r){super(e,t,i,s),this.members=s.membersTypes.map(a=>l.enBox(e,this,a.key,a,(r==null?void 0:r[a.key])??this.getDefaultValue()[a.key]))}getValue(){return Object.fromEntries(this.members.map(e=>[e.name,e.getValue()]))}setValue(e){typeof e=="object"&&e!==null&&this.members.forEach(t=>t.setValue(e[t.name])),this.validate(),super.notifyChildChanged(this)}getDefaultValue(){const e={};return this.type.membersTypes.forEach(t=>{t.type!=="const"&&(e[t.key]=l.enBox(this.engine,null,t.key,t,void 0).getDefaultValue())}),e}getMembers(){return this.members}}class Z extends l{constructor(e,t,i,s,r){super(e,t,i,s),this.entryBoxes=new c("arrayBoxEntryBoxes",this.getDefaultValue()),r!==void 0&&this.setValue(r)}getValue(){return this.entryBoxes.getValue().map(e=>e.getValue())}setValue(e){Array.isArray(e)&&this.entryBoxes.setValue(e.map((t,i)=>l.enBox(this.engine,this,`${this.name}#${i}`,this.type.entryType,t))),this.validate(),this.notifyChildChanged(this)}getDefaultValue(){return[]}}class Y extends c{setValue(e){console.error("We are setting ConstValue to ",e)}addObserver(e){}}new Y("null",null);class Q extends l{constructor(e,t,i,s,r){super(e,t,i,s),this.key=new c("variantKey",r.key),this.variantInnerBox=new c("variantInnerBox"),this.setValue(r),this.key.addObserver(a=>{this.setValue({key:a,value:void 0})})}getValue(){let e=this.variantInnerBox.getValue();return e?e.getValue():null}setValue(e){if(e&&typeof e=="object"&&"key"in e){let t=e.key,i=e.value,s=this.type.variants.find(r=>r.key===t);if(s){this.key.setValue(t),this.variantInnerBox.setValue(l.enBox(this.engine,this,this.name,s,i??this.getDefaultValue().value)),super.setValue({key:t,value:this.variantInnerBox.getValue()});return}}this.key.getValue()&&(this.key.setValue(void 0),this.variantInnerBox.setValue(this.engine.nullBox),this.notifyChildChanged(this)),super.setValue(e)}getDefaultValue(){return{key:this.type.variants[0].key,value:l.enBox(this.engine,null,this.name,this.type.variants[0],void 0).getDefaultValue()}}getInnerVariant(){return this.variantInnerBox}getVariants(){return this.type.variants}}u.add(".form-span-label",{color:"#888",marginLeft:"0.5em",minWidth:"15%"});u.add(".form-span-content",{minWidth:"25%"});u.add("th.table-title",{cursor:"pointer "});u.add(".form-control.for-checkbox.form-switch",{"padding-left":"50px"});u.add(".form-control.for-checkbox:focus-within",{"border-color":"var(--bs-primary)","box-shadow":"0 0 0 0.25rem rgba(var(--bs-primary-rgb), 0.25)"});u.add(".form-control.for-checkbox > .form-check-input:focus",{"box-shadow":"unset"});u.add(".form-check-input:indeterminate",{"background-position-x":"center","background-color":"var(--bs-warning) !important","border-color":"var(--bs-warning)  !important"});u.add(".buttons.btn:focus",{border:"1px solid #ccc"});new c("currentModals",[]);u.add("input.number-input",{textAlign:"right"});u.add('input.number-input[type="string"]',{paddingRight:"27px !important"});function ee(){return F("router",{currentPage:I},n=>{switch(n.currentPage){case"":return o(R,null);case"#about":return o(z,null);case"#form-editor":return o(W,null);case"#tests":return o(K,null);default:return o(G,null)}})}const te=document.getElementById("root");j(()=>o(ee,null),te);
